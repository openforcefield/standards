
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../off-ep-0001/">
      
      
        <link rel="next" href="../off-ep-0006/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>OFF-EP 5 - Resolve ambiguity over PME electrostatics for nonperiodic systems - OpenFF Standards</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#off-ep-0005-allow-different-electrostatics-methods-to-be-used-on-period-and-non-periodic-systems" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenFF Standards" class="md-header__button md-logo" aria-label="OpenFF Standards" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenFF Standards
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OFF-EP 5 - Resolve ambiguity over PME electrostatics for nonperiodic systems
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenFF Standards" class="md-nav__button md-logo" aria-label="OpenFF Standards" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    OpenFF Standards
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Standards
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Standards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/smirnoff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SMIRNOFF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/qc-data-submission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QC Data Submission
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enhancement Proposals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Enhancement Proposals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-0000/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 0 - Purpose and Process
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP X - Template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-0001/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 1 - Clarify that constraint distances override equilibrium bond distances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    OFF-EP 5 - Resolve ambiguity over PME electrostatics for nonperiodic systems
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 5 - Resolve ambiguity over PME electrostatics for nonperiodic systems
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation and Scope
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-and-impact" class="md-nav__link">
    <span class="md-ellipsis">
      Usage and Impact
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backward-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Backward compatibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-description" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detailed description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-the-general-smirnoff-spec-description" class="md-nav__link">
    <span class="md-ellipsis">
      In the general SMIRNOFF spec description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-the-electrostatics-section" class="md-nav__link">
    <span class="md-ellipsis">
      In the Electrostatics section
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discussion" class="md-nav__link">
    <span class="md-ellipsis">
      Discussion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" class="md-nav__link">
    <span class="md-ellipsis">
      Copyright
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-0006/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 6 - Define virtual site exclusion policy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-0008/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 8 - Specifying different vdW methods for periodic and non-periodic systems and allow "no-cutoff" vdW interactions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-0009/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 9 - Add LJPME
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../off-ep-0010/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OFF-EP 10 - Clarify ProperTorsion implementation of idivf and dihedral calculation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation and Scope
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-and-impact" class="md-nav__link">
    <span class="md-ellipsis">
      Usage and Impact
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backward-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Backward compatibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-description" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detailed description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-the-general-smirnoff-spec-description" class="md-nav__link">
    <span class="md-ellipsis">
      In the general SMIRNOFF spec description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-the-electrostatics-section" class="md-nav__link">
    <span class="md-ellipsis">
      In the Electrostatics section
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discussion" class="md-nav__link">
    <span class="md-ellipsis">
      Discussion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" class="md-nav__link">
    <span class="md-ellipsis">
      Copyright
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="off-ep-0005-allow-different-electrostatics-methods-to-be-used-on-period-and-non-periodic-systems">OFF-EP 0005 — Allow different electrostatics methods to be used on period and non-periodic systems</h1>
<p><strong>Status:</strong> Accepted</p>
<p><strong>Authors:</strong> Matt Thompson and John Chodera, Jeffrey Wagner, Simon Boothroyd</p>
<p><strong>Stakeholders:</strong> Simon Boothroyd, Jeffrey Wagner, David Mobley, John Chodera</p>
<p><strong>Acceptance criteria:</strong> Unanimity</p>
<p><strong>Created:</strong> 2020-03-15</p>
<p><strong>Discussion:</strong> <a href="https://github.com/openforcefield/standards/issues/29">Issue #29</a></p>
<p><strong>Implementation:</strong> <a href="https://github.com/openforcefield/openff-standards"><code>openff-standards</code></a></p>
<h2 id="abstract">Abstract</h2>
<p>This change refines the way the <code>&lt;Electrostatics&gt;</code> tag defines behavior in periodic
(i.e., condensed-phase) and non-periodic (i.e., gas phase) systems to clarify the
intended true electrostatics models in each case. Implementations are permitted
to make approximations to these specified models---e.g. Particle-Mesh Ewald (PME)---
as a controlled approximation to Ewald provided the approximation accuracy is controlled.</p>
<h2 id="motivation-and-scope">Motivation and Scope</h2>
<p>In version 0.3 of the <code>&lt;Electrostatics&gt;</code> tag, the default electrostatics method is
<code>method="PME"</code>, with <code>reaction-field</code> also a permitted choice.</p>
<p>These definitions present several issues that this OFF-EP attempts to solve:</p>
<ul>
<li><code>PME</code> is intended to be a permissible approximation to the true electrostatics model, Ewald</li>
<li>The boundary conditions (e.g. dielectric at infinity) for the Ewald sum are not specified</li>
<li>The Ewald method is only intended for periodic systems; unmodified vacuum electrostatics are intended for non-periodic systems</li>
<li>The treatment of intramolecular electrostatics exceptions is unspecified</li>
<li>The choice <code>reaction-field</code> does not uniquely specify the functional form for the true reaction-field model intended; many variants are available</li>
<li>The solvent dielectric constant was not specified.</li>
<li>Cutoffs were not specified</li>
<li>The physical constants used to compute the potential were unspecified</li>
</ul>
<p>To solve these issues, this OFF-EP proposes:</p>
<ul>
<li>The <code>method</code> attribute is replaced with <code>periodic_potential</code> in analogy to other parameters that use the <code>potential</code> term to specify the functional form or a common choice</li>
<li>The <code>periodic_potential</code> attribute defaults to <code>Ewald3D-ConductingBoundary</code> as a valid keyword that states that the Ewald periodic sum with conducting boundary conditions should be the true potential used for periodic systems</li>
<li>PME (and other methods) are permissible approximations to Ewald as long as they are controlled.</li>
<li>For reaction field or other methods, the <code>periodic_potential</code> can specify the exact functional form used for the periodic potential or a keyword denoting a common choice, along with the optional <code>cutoff</code> and <code>solvent_dielectric</code> attributes</li>
<li>The <code>nonperiodic_potential</code> attribute defaults to <code>Coulomb</code> indicating the Coulomb potential is to be used in non-periodic systems, though other functional forms are accepted.</li>
<li>The <code>exception_potential</code> attribute defaults to <code>Coulomb</code>, indicating the Coulomb potential is to be used for exceptions, though other functional forms are accepted.</li>
<li>We explicitly specify which self-consistent physical constants should be used.</li>
</ul>
<h2 id="usage-and-impact">Usage and Impact</h2>
<p>Since most force fields use some flavor of PME for periodic systems and something similar to
<code>nonperiodic_potential="Coulomb"</code> for non-periodic systems, the default attributes for this tag will
likely be the most commonly-used. Splitting <code>method</code> out into explicit attributes to specify periodic,
nonperiodic, and exception potential energy terms, however, makes it less
ambiguous how electrostatics should be handled in each case and decouples the method used in each
case.</p>
<p>Users are recommended to consider upgrading from the default attribute values of 0.3 to 0.4 to avoid
continuing to use this ambiguity. Implementations may wish to execute this up-conversion automatically (see below).</p>
<p>If backward-compatibility is provided as specified below, users of old force fields will not need to update their force field definitions.</p>
<h2 id="backward-compatibility">Backward compatibility</h2>
<p>Implementations may wish to add up-converters from old versions. An up-converter could convert the following tag header</p>
<pre><code>&lt;Electrostatics version=&quot;0.3&quot; method=&quot;PME&quot; scale12=&quot;0.0&quot; scale13=&quot;0.0&quot; scale14=&quot;0.833333&quot; scale15=&quot;1.0&quot;/&gt;
</code></pre>
<p>to a header using version 0.4, which for this case could be</p>
<pre><code>&lt;Electrostatics version=&quot;0.4&quot; periodic_potential=&quot;Ewald3D-ConductingBoundary&quot; nonperiodic_potential=&quot;Coulomb&quot; exception_potential=&quot;Coulomb&quot; scale12=&quot;0.0&quot; scale13=&quot;0.0&quot; scale14=&quot;0.833333&quot; scale15=&quot;1.0&quot;/&gt;
</code></pre>
<p>Concretely, the following conversions should be performed:</p>
<table>
<thead>
<tr>
<th>0.3 <code>method</code></th>
<th>0.4 <code>periodic_potential</code></th>
<th>0.4 <code>nonperiodic_potential</code></th>
<th>0.4 <code>exception_potential</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PME</code></td>
<td><code>Ewald3D-ConductingBoundary</code></td>
<td><code>Coulomb</code></td>
<td><code>Coulomb</code></td>
</tr>
<tr>
<td><code>reaction-field</code></td>
<td><code>charge1*charge2/(4*pi*epsilon0)*(1/r + k_rf*r^2 - c_rf); k_rf=(cutoff^(-3))*(solvent_dielectric-1)/(2*solvent_dielectric+1); c_rf=cutoff^(-1)*(3*solvent_dielectric)/(2*solvent_dielectric+1)</code></td>
<td><code>Coulomb</code></td>
<td><code>Coulomb</code></td>
</tr>
<tr>
<td><code>Coulomb</code></td>
<td><code>Ewald3D-ConductingBoundary</code></td>
<td><code>Coulomb</code></td>
<td><code>Coulomb</code></td>
</tr>
</tbody>
</table>
<p>If the 0.3 section's <code>method</code> does not actually involve the use of a <code>cutoff</code> or <code>switch_width</code> (such as is the case if <code>method="PME"</code>), those values may be set to their defaults in the 0.4 <code>Electrostatics</code> section.</p>
<p>The value of the 0.4 <code>Electrostatics</code> section's <code>solvent_dielectric</code> should be set to <code>none</code>.</p>
<h2 id="detailed-description">Detailed description</h2>
<h3 id="in-the-general-smirnoff-spec-description">In the general SMIRNOFF spec description</h3>
<p>A section is added stating that <a href="https://physics.nist.gov/cuu/Constants/index.html">CODATA 2018</a> physical constants are used in all released SMIRNOFF versions to date.
Future OFF-EPs may migrate the specification of which self-consistent physical constants are used to a higher-level attribute.</p>
<h3 id="in-the-electrostatics-section">In the <code>Electrostatics</code> section</h3>
<p>The <code>method</code> tag attribute is <strong>removed</strong> and replaced with <code>periodic_potential</code>, <code>nonperiodic_potential</code>, and <code>exception_potential</code>.</p>
<p>The optional <code>solvent_dielectric</code> tag attribute is added to specify the solvent dielectric used with finite-ranged potentials, defaulting to <code>none</code>.</p>
<p>For <code>periodic_potential</code>:</p>
<ul>
<li><code>Ewald3D-ConductingBoundary</code> (default) denotes that the Ewald potential with conducting (dielectric 0) boundary conditions are used</li>
<li>A function denotes that the specified function should be used, which may make use of <code>cutoff</code>, <code>switch_width</code>, and/or <code>solvent_dielectric</code> terms</li>
<li>Future OFF-EPs may add specific keywords for common choices of reaction field electrostatics</li>
</ul>
<p>For <code>nonperiodic_potential</code>:</p>
<ul>
<li><code>Coulomb</code> (default) denotes that the standard Coulomb potential should be used with no cutoff or reaction-field attenuation</li>
<li>A function denotes that the specified function should be used, which may make use of <code>cutoff</code>, <code>switch_width</code>, and/or <code>solvent_dielectric</code> terms</li>
</ul>
<p>For <code>exception_potential</code>:</p>
<ul>
<li><code>Coulomb</code> (default) denotes that the standard Coulomb potential should be used with no cutoff or reaction-field attenuation</li>
<li>A function denotes that the specified function should be used, which may make use of <code>cutoff</code>, <code>switch_width</code>, and/or <code>solvent_dielectric</code> terms</li>
</ul>
<h2 id="examples">Examples</h2>
<p>Ewald electrostatics (permitting PME to be used) are used for periodic systems; Coulomb used for non-periodic:</p>
<pre><code>&lt;Electrostatics version=&quot;0.4&quot; periodic_cutoff=&quot;None&quot; periodic_potential=&quot;Ewald3D-ConductingBoundary&quot; nonperiodic_potential=&quot;Coulomb&quot; exception_potential=&quot;Coulomb&quot; scale12=&quot;0.0&quot; scale13=&quot;0.0&quot; scale14=&quot;0.833333&quot; scale15=&quot;1.0&quot;/&gt;
</code></pre>
<p>Shifted reaction field electrostatics (e.g. from <a href="http://docs.openmm.org/7.6.0/userguide/theory/02_standard_forces.html#coulomb-interaction-with-cutoff">OpenMM</a>) are used for periodic systems; Coulomb used for non-periodic:</p>
<pre><code>&lt;Electrostatics version=&quot;0.4&quot; periodic_potential=&quot;charge1*charge2/(4*pi*epsilon0)*(1/r + k_rf*r^2 - c_rf); k_rf=(cutoff^(-3))*(solvent_dielectric-1)/(2*solvent_dielectric+1); c_rf=cutoff^(-1)*(3*solvent_dielectric)/(2*solvent_dielectric+1)&quot; solvent_dielectric=&quot;78.5&quot; periodic_cutoff=&quot;12*angstroms&quot; nonperiodic_potential=&quot;Coulomb&quot; exception_potential=&quot;Coulomb&quot; scale12=&quot;0.0&quot; scale13=&quot;0.0&quot; scale14=&quot;0.833333&quot; scale15=&quot;1.0&quot;/&gt;
</code></pre>
<h2 id="alternatives">Alternatives</h2>
<p>See <a href="https://github.com/openforcefield/standards/pull/30">OFF-EP 0005</a>.</p>
<h2 id="discussion">Discussion</h2>
<ul>
<li>Toolkit <a href="https://github.com/openforcefield/openff-toolkit/issues/1084">#1084</a></li>
<li>Standards <a href="https://github.com/openforcefield/standards/issues/29">#29</a></li>
<li>Alternatives: <a href="https://github.com/openforcefield/standards/pull/30">OFF-EP 0005</a></li>
</ul>
<h2 id="copyright">Copyright</h2>
<p>This template is based upon the
<a href="https://openforcefield.github.io/standards/enhancement-proposals/off-ep-template/">OFF-EP template</a>.</p>
<p>This document is explicitly <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0 Universal</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>